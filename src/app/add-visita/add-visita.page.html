<ion-header>
  <ion-toolbar class="header-f1">
    <ion-buttons slot="start" id="headerPrincipal">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title id="bienvenida1">Crear visita</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="form-content content-f1">

  <ion-list lines="none" style="background: rgb(252, 255, 252, 0.4);" *ngIf="step==1">
    <ion-item>
      <ion-label class="ion-text-wrap pregunta"> <b>Ubicación de la obra: </b></ion-label>
    </ion-item>
    <ion-item>
      <div #mapElement class="map"></div>
    </ion-item>
    <ion-item>
      <ion-label class="ion-text-wrap pregunta"> <b>Dirección Google Maps: </b></ion-label>
      <span>{{ direccion }}</span>
    </ion-item>

    <form [formGroup]="DataVisita">
      <ion-item>
        <ion-label position="floating">Comentarios: </ion-label>
        <ion-textarea rows="3" formControlName="comentarios" placeholder="Comentarios de la visita..."></ion-textarea>
      </ion-item>
      <ion-item>
        <ion-list style="width: 100%;" id="posicionp2" class="list-preg">
          <ion-radio-group formControlName="opcion_visita">
            <ion-list-header id="tarjetapregunta2">
              <ion-label class="ion-text-wrap pregunta pregunta2">
                <b>Selecciona una opción: </b>
              </ion-label>
            </ion-list-header>
            <ion-item>
              <ion-radio value="terminar"></ion-radio>
              <ion-label>Terminar visita</ion-label>
            </ion-item>
            <ion-item>
              <ion-radio value="asignar"></ion-radio>
              <ion-label>Asignar cliente</ion-label>
            </ion-item>
            <ion-item>
              <ion-radio value="seguimiento"></ion-radio>
              <ion-label>Registrar seguimiento</ion-label>
            </ion-item>
          </ion-radio-group>
        </ion-list>
      </ion-item>
    </form>

    <section>
      <ion-button color="warning" [disabled]="!DataVisita.valid" *ngIf="f.opcion_visita.value=='terminar'"
        (click)="nextStep()">Terminar
        visita</ion-button>
      <ion-button color="secondary" [disabled]="!DataVisita.valid"
        *ngIf="f.opcion_visita.value=='seguimiento' || f.opcion_visita.value=='asignar'" (click)="nextStep()">Siguiente
      </ion-button>
    </section>

  </ion-list>

  <div *ngIf="step==2">
    <ion-list lines="none" style="background: rgb(252, 255, 252, 0.4);">
      <ion-item>
        <ion-label class="ion-text-wrap pregunta"> <b>Asignar Cliente</b></ion-label>
      </ion-item>
    </ion-list>
    <app-clientes-tab [origen]="'visita'" (selectCli)="verCliente($event)"></app-clientes-tab>
    <ion-list lines="none" *ngIf="detCli" style="background: rgb(252, 255, 252, 0.4);">
      <ion-item>
        <ion-label class="ion-text-wrap"> <b>Nombre Cliente:</b></ion-label>
         <span><b>{{ detCli.nombre_cli }}</b></span>
      </ion-item>
    </ion-list>

    <section class="ion-text-center" >
      <ion-button color="success" [disabled]="detCli == null" (click)="nextStep()" >
        Siguiente  <ion-icon name="checkmark-circle"></ion-icon>
      </ion-button>
    </section>


  </div>

  <ion-list lines="none" style="background: rgb(252, 255, 252, 0.4);" *ngIf="step==3">
    <ion-item>
      <ion-label class="ion-text-wrap pregunta"> <b>Programar seguimiento</b></ion-label>
    </ion-item>
  </ion-list>

</ion-content>